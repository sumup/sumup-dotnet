// <auto-generated />
#nullable enable

namespace SumUp;

using System;
using System.Net.Http;
using System.Text.Json;
using System.Threading;
using System.Threading.Tasks;
using SumUp.Http;

public sealed partial class ReceiptsClient
{
    private readonly ApiClient _client;

    internal ReceiptsClient(ApiClient client)
    {
        _client = client;
    }

    /// <summary>
    /// Retrieve receipt details
    /// </summary>
    /// <remarks>Retrieves receipt specific data for a transaction.</remarks>
    /// <param name="id">SumUp unique transaction ID or transaction code, e.g. TS7HDYLSKD.</param>
    /// <param name="mid">Merchant code.</param>
    /// <param name="txEventId">The ID of the transaction event (refund).</param>
    /// <param name="cancellationToken">Token used to cancel the request.</param>
    public ApiResponse<Receipt> Get(string id, string mid, int? txEventId = null, CancellationToken cancellationToken = default)
    {
        var request = _client.CreateRequest(HttpMethod.Get, "/v1.1/receipts/{id}", builder =>
        {
            builder.AddPath("id", id);
            builder.AddQuery("mid", mid);
            builder.AddQuery("tx_event_id", txEventId);
        });
        return _client.Send<Receipt>(request, null, null, cancellationToken);
    }

    /// <summary>
    /// Retrieve receipt details
    /// </summary>
    /// <remarks>Retrieves receipt specific data for a transaction.</remarks>
    /// <param name="id">SumUp unique transaction ID or transaction code, e.g. TS7HDYLSKD.</param>
    /// <param name="mid">Merchant code.</param>
    /// <param name="txEventId">The ID of the transaction event (refund).</param>
    /// <param name="cancellationToken">Token used to cancel the request.</param>
    public async Task<ApiResponse<Receipt>> GetAsync(string id, string mid, int? txEventId = null, CancellationToken cancellationToken = default)
    {
        var request = _client.CreateRequest(HttpMethod.Get, "/v1.1/receipts/{id}", builder =>
        {
            builder.AddPath("id", id);
            builder.AddQuery("mid", mid);
            builder.AddQuery("tx_event_id", txEventId);
        });
        return await _client.SendAsync<Receipt>(request, null, null, cancellationToken).ConfigureAwait(false);
    }
}